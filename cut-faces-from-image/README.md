# cut-faces-from-image cloud function

## Связь между фотографиями лиц и оригинальной фотографией

После загрузки фотографии в хранилище функция вырезает лица из фотографии. После вырезания лиц в папке с оригинальной фотографией создается папка с именем 
имя-оригинальной-фотографии_group-photo, в которую и сохраняются вырезанные лица. 

## Настройка облачной функции

1) Создать функцию
2) Указать среду исполнения python 3.7
3) Зайти в редактор кода
4) Добавить файлы index.py, requirements.txt из этого репозитория
5) Добавить папку cfg с файлами config, keys.ini из этого репозитория
6) Заполнить файл keys.ini своими данными, где [aws] - статический ключ доступа, [yacloud] - api-ключ от сервисного аккаунта
7) У сервисного аккаунта должны быть права storage.admin, editor
8) У хранилища должен быть публичный доступ на чтение обьектов и на доступ к списку обьектов
9) Создать очередь с названием faces-queue
10) Создать триггер на Object Storage, указать бакет, сервисный аккаунт, функцию, созданную ранее
11) Обозначить тип события для триггера - создание обьекта
12) Указать суффикс ключа обьекта - _group-photo.jpg
13) В бакет загружать фотографии с окончанием _group-photo.jpg или использовать приложение cloudphoto из задания 1(https://github.com/azatyamanaev/yandex-cloud-photo)
